---
layout: page
title:  "자료형 프로모션"
categories: algorithm
---
## 자료형 프로모션이란?
---
사칙연산이나 대소 비교를 할 경우 두 개의 피연산자를 비교하게 된다.

이러한 피연산자들을 계산할 때 컴파일러는 다음과 같은 규칙에 따라 피연산자들을 변환시킨다.

> 1. 정수형과 실수형이 같이 있을 경우 : **정수형이 실수형으로 바뀐다**
> 2. 양쪽 다 정수형이거나 실수형일 경우 : **보다 넓은 범위의 자료형으로 바뀐다.**
> 3. 양쪽 다 int보다 작은 정수형일 경우 :  **양쪽 다 int의 자료형으로 바뀐다.** 
> 4. 부호 없는 자료형과 부호 있는 자료형일 경우 : **부호 있는 자료형이 부호 없는 자료형으로 바뀐다.**



## 이해하기
---
다음과 같은 코드를 보고 계산 결과를 맞춰보자.

```cpp
unsigned char a = 17;
short b = -18;
int c = 2;
unsigned int d = 0;

cout << (a + b) * c + d << '\n';
```



.

.

.

.

.

.

.

.

.

.

단순히 계산하면 결과는 `-2`라고 생각하게 된다.

그러나, 실제 결과는 `4294967295`라는 해괴한 답이 나오게 된다.

이러한 결과는 다음과 같은 흐름에 따라 전개된다.

1. `a + b`  : 양쪽 다 int보다 작은 자료형이므로 int 자료형 -1이 된다.
2. `(1)의 결과 * c` : int 자료형과 int 자료형의 곱이니 당연히 결과도 int 자료형인 -2가 된다.
3. `(2)의 결과 + d` : 부호없는 자료형으로 변환되어 -2가 4294967294로 계산된다.

자료형의 프로모션은 놓치기 쉽지만 잘못 사용하면 그 결과는 의도와 완전히 다르게 된다.

정신건강을 위해 컴파일러가 어떻게 형변환 시키는지 숙지하도록 하자.



